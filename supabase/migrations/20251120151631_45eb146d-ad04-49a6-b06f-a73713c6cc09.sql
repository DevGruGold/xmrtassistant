-- Create workflow templates with correct category
INSERT INTO public.workflow_templates (template_name, description, category, steps, is_active, tags) VALUES 
('auto_fix_codebase', 'Structured code error fixing with PR generation', 'revenue', '[{"step":1,"name":"retrieve_execution","action":"query_database"},{"step":2,"name":"get_logs","action":"invoke_edge_function","function":"get-edge-function-logs"},{"step":3,"name":"analyze","action":"invoke_edge_function","function":"deepseek-chat"},{"step":4,"name":"fix","action":"invoke_edge_function","function":"autonomous-code-fixer"},{"step":5,"name":"create_pr","action":"invoke_edge_function","function":"github-integration"}]'::jsonb, true, ARRAY['code-fixing','automation']),
('modify_edge_function', 'Planned edge function modifications with monitoring', 'revenue', '[{"step":1,"name":"get_code","action":"invoke_edge_function","function":"github-integration"},{"step":2,"name":"baseline_logs","action":"invoke_edge_function","function":"get-edge-function-logs"},{"step":3,"name":"analytics","action":"invoke_edge_function","function":"get-function-version-analytics"},{"step":4,"name":"modify","action":"invoke_edge_function","function":"deepseek-chat"},{"step":5,"name":"create_pr","action":"invoke_edge_function","function":"github-integration"}]'::jsonb, true, ARRAY['edge-functions','automation'])
ON CONFLICT (template_name) DO UPDATE SET description=EXCLUDED.description, steps=EXCLUDED.steps;