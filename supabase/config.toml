project_id = "vawouugtzwmejxqkeqqj"

[api]
enabled = true
port = 54321
schemas = ["public", "graphql_public"]
extra_search_path = ["public", "extensions"]
max_rows = 1000

[db]
port = 54322
shadow_port = 54320
major_version = 15

[realtime]
enabled = true
ip_version = "ipv4"
max_changes = 100
poll_interval_ms = 100
max_record_bytes = 1048576

[studio]
enabled = true
port = 54323
api_url = "http://127.0.0.1"

[inbucket]
enabled = true
port = 54324
smtp_port = 54325
pop3_port = 54326

[storage]
enabled = true
file_size_limit = "50MiB"

[auth]
enabled = true
site_url = "http://127.0.0.1:3000"
additional_redirect_urls = ["https://127.0.0.1:3000"]
jwt_expiry = 3600
enable_signup = true

[auth.email]
enable_signup = true
double_confirm_changes = true
enable_confirmations = false

# ====================================================================
# OPTIMIZED CRON SCHEDULES - Sequential Execution to Avoid Overlaps
# ====================================================================
# Schedule Breakdown:
# - Device metrics aggregation: Every hour at :05 (hourly data)
# - Device metrics daily rollup: Daily at 00:10 UTC (daily summary)
# - API key health checks: Every 6 hours at :15 (0, 6, 12, 18)
# - System health check: Every hour at :20
# - Device connection monitoring: Every 15 minutes at :25, :40, :55
# - Code monitor daemon: Every 2 hours at :30 (1, 3, 5, etc.)
# - Scheduled actions execution: Every 5 minutes at :00, :05, :10, etc.
# - Ecosystem monitoring: Daily at 11:35 UTC
# ====================================================================

# Device Metrics - Hourly aggregation at :05
[[edge_runtime.scheduled_functions]]
function_name = "aggregate-device-metrics"
schedule = "5 * * * *"
body = '{"action":"aggregate"}'

# Device Metrics - Daily rollup at 00:10 UTC
[[edge_runtime.scheduled_functions]]
function_name = "aggregate-device-metrics"
schedule = "10 0 * * *"
body = '{"action":"aggregate","hour":null}'

# API Key Health - Every 6 hours at :15
[[edge_runtime.scheduled_functions]]
function_name = "api-key-health-monitor"
schedule = "15 */6 * * *"

# System Health - Every hour at :20
[[edge_runtime.scheduled_functions]]
function_name = "system-health"
schedule = "20 * * * *"

# Device Connection Monitoring - Every 15 min at :25, :40, :55
[[edge_runtime.scheduled_functions]]
function_name = "monitor-device-connections"
schedule = "25,40,55 * * * *"
body = '{"action":"status"}'

# Code Monitor Daemon - Every 30 seconds for flowing activity
[[edge_runtime.scheduled_functions]]
function_name = "code-monitor-daemon"
schedule = "* * * * *"
body = '{"action":"monitor"}'

# Scheduled Actions - Every minute for responsive execution
[[edge_runtime.scheduled_functions]]
function_name = "execute-scheduled-actions"
schedule = "* * * * *"

# Ecosystem Monitor - Daily at 11:35 UTC
[[edge_runtime.scheduled_functions]]
function_name = "ecosystem-monitor"
schedule = "35 11 * * *"

# ====================================================================
# EDGE FUNCTIONS AUTHENTICATION CONFIGURATION
# ====================================================================
# Protected functions require JWT authentication (verify_jwt = true)
# Public functions can be called without authentication (verify_jwt = false)

# PROTECTED FUNCTIONS - Require Authentication
# Agent Manager - Allow service role access (called via gatekeeper)
[functions.agent-manager]
verify_jwt = false

[functions.autonomous-code-fixer]
verify_jwt = false

[functions.cleanup-duplicate-tasks]
verify_jwt = false

[functions.code-monitor-daemon]
verify_jwt = false

[functions.conversation-access]
verify_jwt = true

[functions.deepseek-chat]
verify_jwt = true

[functions.extract-knowledge]
verify_jwt = true

[functions.gemini-chat]
verify_jwt = true

[functions.get-lovable-key]
verify_jwt = true

[functions.github-integration]
verify_jwt = false

[functions.knowledge-manager]
verify_jwt = true

[functions.lovable-chat]
verify_jwt = true

[functions.openai-chat]
verify_jwt = true

[functions.openai-tts]
verify_jwt = true

[functions.python-executor]
verify_jwt = false

[functions.render-api]
verify_jwt = true

[functions.summarize-conversation]
verify_jwt = true

[functions.system-diagnostics]
verify_jwt = false

[functions.task-orchestrator]
verify_jwt = true

[functions.vectorize-memory]
verify_jwt = true

[functions.get-embedding]
verify_jwt = true

[functions.xmrt-mcp-server]
verify_jwt = true

[functions.schema-manager]
verify_jwt = true

[functions.predictive-analytics]
verify_jwt = true

[functions.nlg-generator]
verify_jwt = true

[functions.scenario-modeler]
verify_jwt = true

[functions.enhanced-learning]
verify_jwt = true

[functions.multi-step-orchestrator]
verify_jwt = true

[functions.self-optimizing-agent-architecture]
verify_jwt = true

[functions.morning-discussion-post]
verify_jwt = true

[functions.progress-update-post]
verify_jwt = true

[functions.evening-summary-post]
verify_jwt = true

[functions.weekly-retrospective-post]
verify_jwt = true

[functions.community-spotlight-post]
verify_jwt = true

[functions.schedule-reminder]
verify_jwt = true

[functions.execute-scheduled-actions]
verify_jwt = true

# PUBLIC FUNCTIONS - No Authentication Required
# These are either health checks, webhooks, or public-facing APIs
[functions.api-key-health-monitor]
verify_jwt = false

[functions.mining-proxy]
verify_jwt = false

[functions.ecosystem-monitor]
verify_jwt = false

[functions.prometheus-metrics]
verify_jwt = false

[functions.system-status]
verify_jwt = false

[functions.system-health]
verify_jwt = false

[functions.vercel-manager]
verify_jwt = false

[functions.check-frontend-health]
verify_jwt = false

[functions.eliza-gatekeeper]
verify_jwt = false

# XMRTCharger Functions - Public access for device polling
[functions.monitor-device-connections]
verify_jwt = false

[functions.issue-engagement-command]
verify_jwt = false

[functions.validate-pop-event]
verify_jwt = false

[functions.aggregate-device-metrics]
verify_jwt = false

# Contributor Incentive Functions
[functions.validate-github-contribution]
verify_jwt = true

[functions.process-contributor-reward]
verify_jwt = true

