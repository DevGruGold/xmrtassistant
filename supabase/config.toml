project_id = "vawouugtzwmejxqkeqqj"

[api]
enabled = true
port = 54321
schemas = ["public", "graphql_public"]
extra_search_path = ["public", "extensions"]
max_rows = 1000

[db]
port = 54322
shadow_port = 54320
major_version = 15

[realtime]
enabled = true
ip_version = "ipv4"
max_changes = 100
poll_interval_ms = 100
max_record_bytes = 1048576

[studio]
enabled = true
port = 54323
api_url = "http://127.0.0.1"

[inbucket]
enabled = true
port = 54324
smtp_port = 54325
pop3_port = 54326

[storage]
enabled = true
file_size_limit = "50MiB"

[auth]
enabled = true
site_url = "http://127.0.0.1:3000"
additional_redirect_urls = ["https://127.0.0.1:3000"]
jwt_expiry = 3600
enable_signup = true

[auth.email]
enable_signup = true
double_confirm_changes = true
enable_confirmations = false

# ====================================================================
# OPTIMIZED CRON SCHEDULES - Sequential Execution to Avoid Overlaps
# ====================================================================
# Schedule Breakdown:
# - Device metrics aggregation: Every hour at :05 (hourly data)
# - Device metrics daily rollup: Daily at 00:10 UTC (daily summary)
# - API key health checks: Every 6 hours at :15 (0, 6, 12, 18)
# - System health check: Every hour at :20
# - Device connection monitoring: Every 15 minutes at :25, :40, :55
# - Code monitor daemon: Every minute for flowing activity
# - Scheduled actions execution: Every minute for responsive execution
# - Ecosystem monitoring: Daily at 11:35 UTC
# - GitHub Community Posts:
#   * Morning discussion: Daily at 08:00 UTC
#   * Progress update: Daily at 09:00 UTC  
#   * Daily discussion: Daily at 15:00 UTC
#   * Evening summary: Daily at 20:00 UTC
#   * Weekly retrospective: Fridays at 16:00 UTC
#   * Community spotlight: Wednesdays at 14:00 UTC
# ====================================================================

# Device Metrics - Hourly aggregation at :05
[[edge_runtime.scheduled_functions]]
function_name = "aggregate-device-metrics"
schedule = "5 * * * *"
body = '{"action":"aggregate"}'

# Device Metrics - Daily rollup at 00:10 UTC
[[edge_runtime.scheduled_functions]]
function_name = "aggregate-device-metrics"
schedule = "10 0 * * *"
body = '{"action":"aggregate","hour":null}'

# API Key Health - Every 6 hours at :15
[[edge_runtime.scheduled_functions]]
function_name = "api-key-health-monitor"
schedule = "15 */6 * * *"

# System Health - Every hour at :20
[[edge_runtime.scheduled_functions]]
function_name = "system-health"
schedule = "20 * * * *"

# Device Connection Monitoring - Every 15 min at :25, :40, :55
[[edge_runtime.scheduled_functions]]
function_name = "monitor-device-connections"
schedule = "25,40,55 * * * *"
body = '{"action":"status"}'

# Code Monitor Daemon - Every 5 minutes (backup check - instant triggers from python-executor)
[[edge_runtime.scheduled_functions]]
function_name = "code-monitor-daemon"
schedule = "*/5 * * * *"
body = '{"action":"monitor"}'

# Scheduled Actions - Every minute for responsive execution
[[edge_runtime.scheduled_functions]]
function_name = "execute-scheduled-actions"
schedule = "* * * * *"

# Ecosystem Monitor - Daily at 11:35 UTC
[[edge_runtime.scheduled_functions]]
function_name = "ecosystem-monitor"
schedule = "35 11 * * *"

# ====================================================================
# GITHUB COMMUNITY ENGAGEMENT CRON JOBS
# ====================================================================
# These functions automatically post to GitHub discussions to engage
# the community and share autonomous agent progress

# Morning Discussion Post - Daily at 8:00 UTC
[[edge_runtime.scheduled_functions]]
function_name = "morning-discussion-post"
schedule = "0 8 * * *"

# Progress Update Post - Daily at 9:00 UTC  
[[edge_runtime.scheduled_functions]]
function_name = "progress-update-post"
schedule = "0 9 * * *"

# Daily Discussion Post - Daily at 15:00 UTC (3pm)
[[edge_runtime.scheduled_functions]]
function_name = "daily-discussion-post"
schedule = "0 15 * * *"

# Evening Summary Post - Daily at 20:00 UTC (8pm)
[[edge_runtime.scheduled_functions]]
function_name = "evening-summary-post"
schedule = "0 20 * * *"

# Weekly Retrospective Post - Fridays at 16:00 UTC (4pm)
[[edge_runtime.scheduled_functions]]
function_name = "weekly-retrospective-post"
schedule = "0 16 * * 5"

# Community Spotlight Post - Wednesdays at 14:00 UTC (2pm)
[[edge_runtime.scheduled_functions]]
function_name = "community-spotlight-post"
schedule = "0 14 * * 3"


# ====================================================================
# EDGE FUNCTIONS AUTHENTICATION CONFIGURATION
# ====================================================================
# Protected functions require JWT authentication (verify_jwt = true)
# Public functions can be called without authentication (verify_jwt = false)

# PROTECTED FUNCTIONS - Require Authentication
# Agent Manager - Allow service role access (called via gatekeeper)
[functions.agent-manager]
verify_jwt = false

[functions.autonomous-code-fixer]
verify_jwt = false

[functions.cleanup-duplicate-tasks]
verify_jwt = false

[functions.code-monitor-daemon]
verify_jwt = false

[functions.conversation-access]
verify_jwt = true

[functions.deepseek-chat]
verify_jwt = true

[functions.extract-knowledge]
verify_jwt = true

[functions.gemini-chat]
verify_jwt = true

[functions.get-lovable-key]
verify_jwt = true

[functions.github-integration]
verify_jwt = false

[functions.knowledge-manager]
verify_jwt = true

[functions.lovable-chat]
verify_jwt = true

[functions.vercel-ai-chat]
verify_jwt = true

[functions.vercel-ai-chat-stream]
verify_jwt = true

[functions.openai-chat]
verify_jwt = true

[functions.openai-tts]
verify_jwt = true

[functions.python-executor]
verify_jwt = false

[functions.render-api]
verify_jwt = true

[functions.summarize-conversation]
verify_jwt = true

[functions.system-diagnostics]
verify_jwt = false

[functions.task-orchestrator]
verify_jwt = true

[functions.vectorize-memory]
verify_jwt = true

[functions.get-embedding]
verify_jwt = true

[functions.xmrt-mcp-server]
verify_jwt = true

[functions.schema-manager]
verify_jwt = true

[functions.predictive-analytics]
verify_jwt = true

[functions.nlg-generator]
verify_jwt = true

[functions.scenario-modeler]
verify_jwt = true

[functions.enhanced-learning]
verify_jwt = true

[functions.multi-step-orchestrator]
verify_jwt = true

[functions.self-optimizing-agent-architecture]
verify_jwt = true

# GitHub Community Posting Functions - Must be public for cron access
[functions.morning-discussion-post]
verify_jwt = false

[functions.progress-update-post]
verify_jwt = false

[functions.daily-discussion-post]
verify_jwt = false

[functions.evening-summary-post]
verify_jwt = false

[functions.weekly-retrospective-post]
verify_jwt = false

[functions.community-spotlight-post]
verify_jwt = false

[functions.schedule-reminder]
verify_jwt = true

[functions.execute-scheduled-actions]
verify_jwt = false

# PUBLIC FUNCTIONS - No Authentication Required
# These are either health checks, webhooks, or public-facing APIs
[functions.api-key-health-monitor]
verify_jwt = false

[functions.mining-proxy]
verify_jwt = false

[functions.ecosystem-monitor]
verify_jwt = false

[functions.prometheus-metrics]
verify_jwt = false

[functions.system-status]
verify_jwt = false

[functions.system-health]
verify_jwt = false

[functions.vercel-manager]
verify_jwt = false

[functions.check-frontend-health]
verify_jwt = false

# XMRTCharger Functions - Public access for device polling
[functions.monitor-device-connections]
verify_jwt = false

[functions.issue-engagement-command]
verify_jwt = false

[functions.validate-pop-event]
verify_jwt = false

[functions.aggregate-device-metrics]
verify_jwt = false

# Contributor Incentive Functions
[functions.validate-github-contribution]
verify_jwt = true

[functions.process-contributor-reward]
verify_jwt = true

[functions.fetch-auto-fix-results]
verify_jwt = false

[functions.python-network-proxy]
verify_jwt = false

[functions.python-db-bridge]
verify_jwt = false

[functions.search-edge-functions]
verify_jwt = false

